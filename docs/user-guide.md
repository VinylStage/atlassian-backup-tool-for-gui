# Confluence 백업 도구 사용자 가이드

이 가이드는 Confluence 백업 도구의 모든 기능을 상세히 설명합니다.

---

## 목차

1. [시작하기](#1-시작하기)
2. [화면 구성](#2-화면-구성)
3. [Space 탐색](#3-space-탐색)
4. [페이지 미리보기](#4-페이지-미리보기)
5. [페이지 다운로드](#5-페이지-다운로드)
6. [다중 백업](#6-다중-백업)
7. [페이지 삭제](#7-페이지-삭제)
8. [새로고침](#8-새로고침)
9. [다운로드 파일 구조](#9-다운로드-파일-구조)
10. [자주 묻는 질문](#10-자주-묻는-질문)

---

## 1. 시작하기

### 프로그램 실행

1. 터미널(명령 프롬프트)을 엽니다
2. 프로젝트 폴더로 이동합니다
3. 다음 명령어를 입력합니다:

```bash
npm run dev
```

4. "Server running at http://localhost:3000" 메시지가 나타나면 준비 완료
5. 웹 브라우저에서 `http://localhost:3000` 주소로 접속합니다

### 최초 설정 확인

프로그램이 정상 작동하려면 `.env` 파일에 다음 정보가 설정되어 있어야 합니다:

- Confluence 도메인 (예: `회사명.atlassian.net`)
- 이메일 주소
- API 토큰

설정이 올바르지 않으면 "Failed to load spaces" 오류가 표시됩니다.

---

## 2. 화면 구성

프로그램 화면은 크게 두 영역으로 나뉩니다:

```
┌─────────────────┬────────────────────────────────────┐
│                 │                                    │
│    사이드바      │           메인 영역                 │
│   (왼쪽 패널)    │         (오른쪽 영역)               │
│                 │                                    │
│  - Spaces 목록   │  - 페이지 미리보기                  │
│  - Pages 트리    │  - 다운로드 옵션                    │
│  - Stats 통계    │                                    │
│  - Backup 패널   │                                    │
│                 │                                    │
└─────────────────┴────────────────────────────────────┘
```

### 사이드바 크기 조절

사이드바의 너비를 원하는 대로 조절할 수 있습니다:

1. 사이드바와 메인 영역 **사이의 경계선**에 마우스를 가져갑니다
2. **클릭한 채로 좌우로 드래그**합니다 (드래그 시 커서가 변경됩니다)
3. 원하는 너비에서 마우스를 놓습니다

> 💡 **팁**: 조절한 너비는 자동 저장되어, 다음에 접속해도 유지됩니다.

**크기 제한:**
- 최소 너비: 240px
- 최대 너비: 600px

---

## 3. Space 탐색

### Space 선택하기

1. 사이드바 상단의 **"Spaces"** 섹션을 확인합니다
2. 원하는 Space 이름을 **클릭**합니다
3. 선택된 Space는 **파란색 배경**으로 표시됩니다
4. 하단에 해당 Space의 페이지 트리가 로드됩니다

### 페이지 트리 사용법

페이지 트리는 Confluence의 페이지 구조를 그대로 보여줍니다:

| 아이콘 | 의미 |
|--------|------|
| 📂 | 하위 페이지가 있는 폴더 |
| 📄 | 하위 페이지가 없는 단일 페이지 |
| ▶ | 접힌 상태 (클릭하면 펼침) |
| ▼ | 펼친 상태 (클릭하면 접음) |

**페이지 선택:**
- 페이지 이름을 클릭하면 오른쪽 메인 영역에서 **미리보기**가 표시됩니다

### Stats (통계)

선택한 Space의 통계 정보를 보여줍니다:

| 항목 | 설명 |
|------|------|
| Pages | 전체 페이지 수 |
| Root | 최상위 페이지 수 |
| Depth | 최대 중첩 깊이 |

---

## 4. 페이지 미리보기

페이지를 선택하면 메인 영역에서 내용을 확인할 수 있습니다.

### 메타데이터 확인

페이지 상단에 다음 정보가 표시됩니다:

| 항목 | 설명 |
|------|------|
| ID | 페이지 고유 식별자 |
| Space | 소속 Space ID |
| Parent | 상위 페이지 ID (Root면 없음) |
| Status | 페이지 상태 (current 등) |

### Preview / Markdown 탭

두 가지 보기 모드를 제공합니다:

| 탭 | 설명 |
|----|------|
| **Preview** | HTML로 렌더링된 페이지 (실제 보이는 모습) |
| **Markdown** | Markdown으로 변환된 텍스트 |

탭 버튼을 클릭하여 전환합니다.

---

## 5. 페이지 다운로드

개별 페이지를 다운로드하는 방법입니다.

### 다운로드 형식 선택

미리보기 화면에서 다음 체크박스를 확인합니다:

| 형식 | 설명 |
|------|------|
| **HTML** | 웹 브라우저에서 열 수 있는 HTML 파일 |
| **MD** | Markdown 형식 텍스트 파일 |
| **PDF** | 인쇄용 PDF 문서 |

원하는 형식을 **체크**합니다 (복수 선택 가능).

### 다운로드 실행

1. 형식을 선택합니다
2. **"Download"** 버튼을 클릭합니다
3. ZIP 파일이 자동으로 다운로드됩니다

### 다운로드 진행 상태

다운로드 진행 상황에 따라 버튼과 메시지가 변경됩니다:

| 상태 | 표시 |
|------|------|
| 대기 중 | "Download" 버튼 |
| 다운로드 중 | "Downloading..." (버튼 비활성화) |
| 성공 | ✓ Downloaded... (초록색 메시지) |
| 실패 | 에러 메시지 (빨간색) |

### 다운로드 파일 이름

```
{페이지ID}_{페이지제목}.zip
```

예시: `12345678_프로젝트_개요.zip`

---

## 6. 다중 백업

여러 페이지를 한 번에 백업하는 방법입니다.

### Backup 패널 위치

사이드바 하단의 **"Backup"** 섹션에서 설정합니다.

### 백업 레벨 선택

| 레벨 | 설명 |
|------|------|
| **Space** | 전체 Space의 모든 페이지 백업 |
| **Folder** | 선택한 폴더와 하위 페이지만 백업 |
| **Page** | 선택한 개별 페이지만 백업 |

### 형식 선택

원하는 출력 형식을 **체크박스**로 선택합니다 (복수 선택 가능):

| 형식 | 설명 |
|------|------|
| **HTML** | 웹 브라우저에서 열 수 있는 HTML 파일 |
| **MD** | Markdown 형식 텍스트 파일 |
| **PDF** | 인쇄용 PDF 문서 |

### 백업 실행

1. 레벨을 선택합니다
2. 형식을 체크합니다
3. (Folder/Page 레벨인 경우) 대상 페이지를 선택합니다
4. **"Download {N} pages"** 버튼을 클릭합니다
5. 완료되면 ZIP 파일이 다운로드됩니다

---

## 7. 페이지 삭제

Confluence에서 페이지를 삭제하는 기능입니다.

> ⚠️ **주의**: 삭제된 페이지는 **복구할 수 없습니다**. 신중하게 사용하세요.

### 선택 모드 진입

1. Pages 섹션에서 **"선택"** 버튼을 클릭합니다
2. 각 페이지 앞에 **체크박스**가 나타납니다
3. 버튼이 **"선택 취소"**로 변경됩니다

### 페이지 선택

| 버튼 | 기능 |
|------|------|
| 개별 체크박스 | 해당 페이지만 선택/해제 |
| **전체 선택** | 모든 페이지 선택 |
| **선택 해제** | 모든 선택 취소 |

### 삭제 실행

1. 삭제할 페이지를 선택합니다
2. **"삭제 (N)"** 버튼을 클릭합니다 (N = 선택된 페이지 수)
3. 확인 다이얼로그가 나타납니다

### 확인 다이얼로그

```
┌─────────────────────────────────────┐
│  페이지 삭제 확인                     │
│                                     │
│  N개 페이지를 삭제하시겠습니까?        │
│  이 작업은 복구할 수 없습니다.         │
│                                     │
│  ☐ 하위 페이지 포함                   │
│                                     │
│              [취소]  [삭제]           │
└─────────────────────────────────────┘
```

| 옵션 | 설명 |
|------|------|
| **하위 페이지 포함** | 체크하면 선택한 페이지의 모든 자식 페이지도 함께 삭제 |

4. **"삭제"** 버튼을 클릭하면 삭제가 진행됩니다
5. 삭제 완료 후 페이지 목록이 자동으로 새로고침됩니다

### 선택 모드 종료

**"선택 취소"** 버튼을 클릭하면 일반 모드로 돌아갑니다.

---

## 8. 새로고침

Confluence에서 변경된 내용을 반영하는 방법입니다.

### 수동 새로고침

Pages 섹션 제목 옆의 **↻ 버튼**을 클릭합니다.

```
┌─────────────────┐
│ Pages      [↻]  │  ← 이 버튼 클릭
├─────────────────┤
│ 📂 페이지1       │
│ 📄 페이지2       │
└─────────────────┘
```

### 자동 새로고침

다음 상황에서는 자동으로 새로고침됩니다:

- 페이지 삭제 완료 후

### 새로고침이 필요한 경우

- Confluence 웹에서 새 페이지를 만들었을 때
- 다른 사람이 페이지를 수정/삭제했을 때
- 페이지 구조가 변경되었을 때

---

## 9. 다운로드 파일 구조

다운로드한 ZIP 파일의 내부 구조입니다.

### 단일 페이지 다운로드

```
{페이지ID}_{제목}.zip
└── {제목}/
    ├── page.html          # HTML 파일
    ├── page.md            # Markdown 파일
    ├── page.pdf           # PDF 파일
    └── attachments/       # 첨부파일 폴더
        ├── image1.png
        └── document.pdf
```

### Space 전체 백업

```
{SpaceID}_{Space이름}.zip
└── pages/
    ├── {페이지1}/
    │   ├── page.html
    │   ├── page.md
    │   ├── page.pdf
    │   ├── attachments/
    │   └── {하위페이지}/      # 계층 구조 유지
    │       └── ...
    └── {페이지2}/
        └── ...
```

### 각 파일 설명

| 파일 | 용도 |
|------|------|
| `page.html` | 웹 브라우저로 열어서 보기 |
| `page.md` | 텍스트 에디터로 편집 가능 |
| `page.pdf` | 인쇄 또는 공유용 |
| `attachments/` | 페이지에 첨부된 모든 파일 |

---

## 10. 자주 묻는 질문

### Q: Space 목록이 로드되지 않아요

**A:** `.env` 파일의 설정을 확인하세요:
- 도메인이 올바른지 (`.atlassian.net` 포함)
- 이메일 주소가 정확한지
- API 토큰이 유효한지

### Q: PDF가 생성되지 않아요

**A:** PDF 생성에는 추가 시간이 필요합니다. 잠시 기다려 주세요. 계속 실패하면 서버 로그를 확인하세요.

### Q: 삭제한 페이지를 복구하고 싶어요

**A:** 이 도구로 삭제한 페이지는 복구할 수 없습니다. 삭제 전 반드시 백업하세요.

### Q: 새로고침해도 변경사항이 안 보여요

**A:** 서버 캐시 때문일 수 있습니다. ↻ 버튼을 다시 클릭하거나, 잠시 후 다시 시도하세요.

### Q: 사이드바 크기가 저장되지 않아요

**A:** 브라우저의 localStorage가 비활성화되어 있을 수 있습니다. 브라우저 설정을 확인하세요.

### Q: 대용량 Space 백업이 느려요

**A:** 페이지 수가 많거나 첨부파일이 클수록 시간이 오래 걸립니다. 다운로드가 완료될 때까지 잠시 기다려 주세요.

---

## 도움이 더 필요하신가요?

기술적인 문제는 [기술 문서](technical.md)를 참조하거나, 담당자에게 문의하세요.
